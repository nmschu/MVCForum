@{
    ViewBag.Title = "Story";
}
<body style=background-color:#222222;>
    <div class="container">
        <div class="row">
            <div class="col-md-8" style="text-align:center; font-weight:bold;">
                <p>story goes here</p>
            </div>
            <div class="col-md-4" style="text-align:center; font-weight:bold;">
                <p>Chat window here</p>
            </div>
            <div class="col-md-8" style="height:30em; overflow-y: scroll;">
               <p>
                   Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left
               </p>
                <p>
                    Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left
                </p>
                <p>
                    Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left
                </p>
                <p>
                    Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left Container left
                </p>
            </div>
            <div class="col-md-4 sidebar" style="height:30em; overflow-y: scroll;">
                <div>
                    <ul id="discussion" style="color:snow; list-style:none;"></ul>
                    
                    @section scripts {
                        <!--script references-->
                        <script src="~/Scripts/jquery.signalR-2.2.0.min.js"></script>
                        <script src="~/signalr/hubs"></script>

                        <!--Script to have a chatbox-->
                        <script>
                $(function () {
                    //reference the autogenerated proxy file for the hub
                    var chat = $.connection.chatHub;

                    //function that calls the hub to run the message
                    chat.client.addNewMessageToPage = function (name, message) {
                        $('#discussion').append('<li><strong>' + htmlEncode(name) + '</strong>: ' + htmlEncode(message) + '</li>');
                    };

                    //get username and store it to prepend messages
                    //change prompt to something like get username
                    $('#displayname').val(prompt('Enter your name: ', ''));

                    //setting the initial focus to the message input box
                    //is this really necessary
                    $('#message').focus();

                    //starting the connection
                    $.connection.hub.start().done(function () {

                        $('#message').keypress(function (e) {
                            var key = e.which;
                            if (key == 13) //13 is the enter key
                            {
                                $('#sendmessage').click();
                                return false;
                            }
                        });
                        //where the click event happens. Later will try to change it so that you can enter or click
                        $('#sendmessage').click(function () {
                            chat.server.send($('#displayname').val(), $('#message').val());

                            //Clear the text box
                            $('#message').val('').focus();
                        });
                    });
                });

                //optional function that html encodes message for display in page
                function htmlEncode(value) {
                    var encodedValue = $('<div />').text(value).html();
                    return encodedValue;
                }
                        </script>
                    }
                </div>
               
            </div>
            <div class="col-md-8" style="height: 10em">
                make your choice here
            </div>
            <div class="col-md-4" style="height: 10em">
                <div style="color:snow;">
                    <!--where you type your message-->
                    <input type="text" id="message" />

                    <input type="button" id="sendmessage" value="Send" />

                    <input type="hidden" id="displayname" />

                </div>
            </div>
            
        </div>
    </div>

    
</body>
